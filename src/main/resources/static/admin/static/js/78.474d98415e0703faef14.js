webpackJsonp([78],{zCOp:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={data:function(){var e=this;return{addInfo:{newPassword:"",newPswConfirm:"",oldPassword:""},rules:{oldPassword:[{required:!0,trigger:"blur",message:"请输入旧密码"}],newPassword:[{required:!0,trigger:"blur",validator:function(s,r,o){""===r?o(new Error("请输入新密码")):/^[a-zA-Z0-9]{6,15}$/.test(e.addInfo.newPassword)?o():o(new Error("密码格式错误"))}}],newPswConfirm:[{validator:function(s,r,o){""===r?o(new Error("请再次输入密码")):r!==e.addInfo.newPassword?o(new Error("两次输入密码不一致")):o()},trigger:"blur",required:!0}]}}},watch:{},methods:{submitForm:function(e){var s=this;this.$refs[e].validate(function(e){if(e){var r=new FormData;r.append("newPassword",s.addInfo.newPassword),r.append("password",s.addInfo.oldPassword),s.$http.post(s.api.updatePassword,r,{headers:{"Content-Type":"multipart/form-data"}},function(e){e.result?s.logOut():s.$message({type:"error",message:"修改失败",duration:2e3})},function(e){})}})},logOut:function(){var e=this;e.$http.get(e.api.userLogoff,{params:{}},function(s){s.result?(e.$store.dispatch("LogOut"),e.$message({type:"success",message:"注销成功，页面即将跳转至登录页",duration:1e3,onClose:function(){location.reload()}})):e.$message({type:"error",message:"注销失败",duration:1e3})},function(e){})},resetForm:function(e){this.$refs[e].resetFields()}}},t={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"app-form ml60 mt40"},[r("el-form",{ref:"addInfo",attrs:{model:e.addInfo,rules:e.rules,"label-width":"120px",size:"mini","inline-message":!0}},[r("el-form-item",{attrs:{label:"旧密码：",prop:"oldPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.addInfo.oldPassword,callback:function(s){e.$set(e.addInfo,"oldPassword",s)},expression:"addInfo.oldPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[r("el-input",{attrs:{type:"password"},model:{value:e.addInfo.newPassword,callback:function(s){e.$set(e.addInfo,"newPassword",s)},expression:"addInfo.newPassword"}}),r("span",{staticClass:"ml10",staticStyle:{color:"#f45151"}},[e._v("大小写字母和数字6-15位")])],1),e._v(" "),r("el-form-item",{attrs:{label:"确认新密码：",prop:"newPswConfirm"}},[r("el-input",{attrs:{type:"password"},model:{value:e.addInfo.newPswConfirm,callback:function(s){e.$set(e.addInfo,"newPswConfirm",s)},expression:"addInfo.newPswConfirm"}})],1)],1),e._v(" "),r("div",{staticClass:"mt40 ml40"},[r("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.submitForm("addInfo")}}},[e._v("确定")]),e._v(" "),r("el-button",{on:{click:function(s){return e.resetForm("addInfo")}}},[e._v("重置")])],1)],1)},staticRenderFns:[]},a=r("VU/8")(o,t,!1,null,null,null);s.default=a.exports}});
//# sourceMappingURL=78.474d98415e0703faef14.js.map